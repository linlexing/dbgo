<#append . "OtherJSFiles" "/public/js/ng-grid-2.0.12.min.js"#>
<#append . "OtherCSSFiles" "/public/css/ng-grid.min.css"#>
<#append . "OtherDependencys" "ngGrid"#>
<#template "ngheader.html" .#>
<link rel="stylesheet" type="text/css" href=<#static "recordview/show.css"#>></link>
<script>
app.config(['$translateProvider', function ($translateProvider) {
	$translateProvider.translations('en', {
		"LABEL": <#.label_en#>,
	}).translations('cn', {
		"LABEL": <#.label_cn#>,
	}).registerAvailableLanguageKeys(['en', 'cn'], {
		'en_US': 'en',
		'en_UK': 'en',
		'zh_CN': 'cn',
		'zh_cn': 'cn'
	}).determinePreferredLanguage()
	.useLocalStorage();
}]);
app.controller('mainCtrl', ['$translate', '$scope','$rootScope','$location','$aside','$alert','$http',function ($translate, $scope,$rootScope,$location,$aside,$alert,$http) {
	$translate("LABEL").then(function(label){
		document.title=label;
	});
	$scope.navCollapsed=true;

    $scope.gridOptions = { data: 'myData'   , columnDefs: [{ field: "name", width: 120, pinned: true },
                    { field: "age", width: 120 },
                    { field: "birthday", width: 120 },
                    { field: "salary", width: 120 }]};
	$scope.refreshData= function(){
		$http.post(<#.data_action#>,{})
			.success(function(data,status,headers,config,statusText){
				//$scope.myData = $.parseJSON(JSON.parse(data.data));
				$scope.myData = data.data;
			})
			.error(function(data,status,headers,config,statusText){
				$alert({title: 'error', content:data.error, placement: 'top-right', type: 'danger', show: true});
			});
	}
	$scope.refreshData();
}]);
</script>
<div ng-controller="mainCtrl" style="height:100%">
<nav role="navigation" class="navbar navbar-default navbar-static-top">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
		<div class="navbar-brand navbar-left" ><i class="fa fa-query"></i> <span translate>LABEL</span></div>
        <button type="button" ng-click="navCollapsed = !navCollapsed" class="navbar-toggle">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
    </div>
    <!-- Collection of nav links and other content for toggling -->
    <div class="collapse navbar-collapse"  ng-class="{'in':!navCollapsed}">
        <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#">Profile</a></li>
            <li><a href="#">Messages</a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
            <li><a href="#">Login</a></li>
        </ul>
    </div>
</nav>
<div class="gridStyle" ng-grid="gridOptions"></div>
<#template "ngfooter.html" .#>
